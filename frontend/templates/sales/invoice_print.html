<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice #{{ invoice.invoice_number }} - Digital Khata</title>
    <link href="/static/css/tailwind.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-white text-slate-800 font-sans">
    <div class="max-w-4xl mx-auto p-8">
        <div class="flex justify-between items-start mb-8">
            <div>
                <h1 class="text-3xl font-bold text-blue-600">Digital Khata</h1>
                <p class="text-slate-600">123 Business Street, Delhi, India</p>
                <p class="text-slate-600">Phone: +91 98765 43210</p>
                <p class="text-slate-600">Email: info@digital-khata.com</p>
            </div>
            <div class="text-right">
                <h2 class="text-2xl font-bold">INVOICE</h2>
                <p class="text-slate-600">Invoice #: {{ invoice.invoice_number }}</p>
                <p class="text-slate-600">Date: {{ invoice.created_at|date:"M d, Y" }}</p>
                <p class="text-slate-600">Due Date: {{ invoice.due_date|date:"M d, Y" }}</p>
            </div>
        </div>
        
        <div class="grid grid-cols-2 gap-8 mb-8">
            <div>
                <h3 class="font-bold text-lg mb-2">Bill To:</h3>
                <p class="font-medium">{{ invoice.customer_name }}</p>
                <p class="text-slate-600">{{ invoice.customer_address }}</p>
                <p class="text-slate-600">{{ invoice.customer_phone }}</p>
            </div>
            <div>
                <h3 class="font-bold text-lg mb-2">Payment Details:</h3>
                <p class="text-slate-600">Payment Method: {{ invoice.payment_method|default:"Cash" }}</p>
                <p class="text-slate-600">Status: 
                    <span class="badge 
                        {% if invoice.status == 'paid' %}badge-success
                        {% elif invoice.status == 'pending' %}badge-warning
                        {% else %}badge-danger
                        {% endif %}">
                        {{ invoice.get_status_display }}
                    </span>
                </p>
            </div>
        </div>
        
        <div class="mb-8">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-slate-300">
                        <th class="text-left py-2">Item</th>
                        <th class="text-right py-2">Quantity</th>
                        <th class="text-right py-2">Price</th>
                        <th class="text-right py-2">Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in invoice.items.all %}
                    <tr class="border-b border-slate-200">
                        <td class="py-3">{{ item.product_name }}</td>
                        <td class="text-right py-3">{{ item.quantity }}</td>
                        <td class="text-right py-3">₹{{ item.price }}</td>
                        <td class="text-right py-3">₹{{ item.total }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <div class="grid grid-cols-2 gap-8">
            <div>
                <h3 class="font-bold text-lg mb-2">Notes:</h3>
                <p class="text-slate-600">{{ invoice.notes|default:"Thank you for your business!" }}</p>
            </div>
            <div>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span>Subtotal:</span>
                        <span>₹{{ invoice.subtotal }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Tax (5%):</span>
                        <span>₹{{ invoice.tax }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Discount:</span>
                        <span>₹{{ invoice.discount|default:0 }}</span>
                    </div>
                    <div class="flex justify-between font-bold text-lg pt-2 border-t border-slate-300">
                        <span>Total:</span>
                        <span>₹{{ invoice.total }}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-12 pt-6 border-t border-slate-300 text-center">
            <p class="text-slate-600">Thank you for your business!</p>
            <div class="flex justify-center mt-4 space-x-4">
                <button onclick="window.print()" class="no-print btn btn-primary">
                    <i class="bi bi-printer mr-2"></i>Print Invoice
                </button>
                <button onclick="window.close()" class="no-print btn btn-outline">
                    <i class="bi bi-x-lg mr-2"></i>Close
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // Auto-print when page loads
        window.onload = function() {
            window.print();
        };
    </script>
</body>
</html>